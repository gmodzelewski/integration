schemaVersion: 2.2.2
metadata:
  name: camelk-workspace

projects:
  - name: integration
    git:
      checkoutFrom:
        revision: main
      remotes:
        origin: https://github.com/gmodzelewski/integration
  - name: message-hub
    git:
      checkoutFrom:
        revision: main
      remotes:
        origin: https://github.com/RedHat-Middleware-Workshops/workshop-camel3

components:
  - name: dev-tooling
    container:
      image: quay.io/devfile/universal-developer-image:ubi8-latest
      endpoints:
        - name: http-3100
          targetPort: 3100
      cpuLimit: "4"
      cpuRequest: "1"
      memoryLimit: 8G
      memoryRequest: 4G
      mountSources: true

commands:
  - id: init-jbang
    exec:
      commandLine: jbang app setup && jbang trust add https://github.com/apache/camel && jbang app install camel@apache/camel
      component: dev-tooling
# events:
#   postStart:
#     - init-jbang
